{
  "doc_type": "FACTURE",
  "version": "v1.2",
  "enabled": true,
  "priority": 75,
  "description": "Classification déterministe par mots-clés pour Facture / Invoice, renforcée anti-confusion BON_DE_COMMANDE.",
  "languages": ["fr", "en"],
  "classification_mode": "keyword_scoring",
  "thresholds": {
    "pass": 75,
    "review": 50,
    "unknown": 0
  },
  "decision_guards": {
    "require_at_least_one_strong_identity": true,
    "prefer_review_if_bc_signals_present": true,
    "forbid_pass_if_bc_strong_hits_and_no_invoice_identity": true,
    "notes": [
      "Une facture ne doit pas être validée PASS uniquement sur des mots financiers génériques (TOTAL, TVA, IBAN, SWIFT).",
      "PASS exige au moins un signal fort d'identité facture (FACTURE / INVOICE / INVOICE NUMBER / N° FACTURE).",
      "Si des signaux forts BC sont présents (BON DE COMMANDE / PURCHASE ORDER / PO NUMBER / N° COMMANDE), réduire la confiance ou envoyer en REVIEW."
    ]
  },
  "keywords": {
    "strong": [
      "FACTURE",
      "FACTURE N",
      "FACTURE N°",
      "NUMERO DE FACTURE",
      "N° FACTURE",
      "INVOICE",
      "INVOICE NUMBER",
      "INVOICE NO",
      "INVOICE #",
      "INVOICE NO.",
      "DATE FACTURE",
      "INVOICE DATE"
    ],
    "medium": [
      "MONTANT TTC",
      "TOTAL TTC",
      "TOTAL HT",
      "MONTANT HT",
      "TVA",
      "TAX",
      "VAT",
      "VAT AMOUNT",
      "TAX AMOUNT",
      "NET A PAYER",
      "NET TO PAY",
      "AMOUNT DUE",
      "BALANCE DUE",
      "TOTAL DUE",
      "DUE DATE",
      "ECHEANCE",
      "DATE D'ECHEANCE",
      "PAYMENT TERMS",
      "CONDITIONS DE PAIEMENT",
      "MODE DE PAIEMENT",
      "PAYMENT METHOD",
      "BILL TO",
      "CLIENT",
      "CUSTOMER",
      "FOURNISSEUR",
      "SUPPLIER",
      "IBAN",
      "BIC",
      "SWIFT",
      "REFERENCE CLIENT",
      "CUSTOMER REFERENCE"
    ],
    "weak": [
      "TOTAL",
      "SUBTOTAL",
      "TTC",
      "HT",
      "TAX",
      "VAT",
      "AMOUNT",
      "MONTANT",
      "TOTAL AMOUNT",
      "CURRENCY",
      "DEVISE",
      "REMISE",
      "DISCOUNT",
      "ACOMPTE",
      "ADVANCE PAYMENT",
      "TERMS"
    ],
    "negative": [
      "BON DE COMMANDE",
      "BON DE COMMANDE N",
      "BON DE COMMANDE N°",
      "COMMANDE D'ACHAT",
      "PURCHASE ORDER",
      "PURCHASE ORDER NO",
      "PURCHASE ORDER NUMBER",
      "PO NUMBER",
      "PO NO",
      "PO #",
      "ORDER DATE",
      "DATE DE COMMANDE",
      "NUMERO DE COMMANDE",
      "N° COMMANDE",
      "ORDERED BY",
      "ACHETEUR",
      "SERVICE ACHATS",
      "PURCHASING DEPARTMENT",
      "SHIP TO",
      "DELIVER TO",
      "DELIVERY DATE",
      "DATE DE LIVRAISON",
      "ADRESSE DE LIVRAISON",
      "DEVIS",
      "QUOTATION",
      "QUOTE",
      "VALIDITE DU DEVIS",
      "BON DE LIVRAISON",
      "DELIVERY NOTE",
      "BL",
      "CONTRAT",
      "AGREEMENT",
      "THIS CONTRACT",
      "THIS AGREEMENT",
      "CONTRACT NUMBER",
      "AVOIR",
      "CREDIT NOTE",
      "CONNAISSEMENT",
      "BILL OF LADING"
    ]
  },
  "anti_confusion_targets": [
    "BON_DE_COMMANDE",
    "CONTRAT",
    "DEVIS",
    "BON_DE_LIVRAISON",
    "AVOIR"
  ],
  "expected_output": {
    "doc_type": "FACTURE",
    "status": "PASS | REVIEW_REQUIRED | UNKNOWN",
    "score": "number",
    "justification": [
      "matched strong keywords",
      "matched medium keywords",
      "negative keywords if any"
    ]
  }
}
