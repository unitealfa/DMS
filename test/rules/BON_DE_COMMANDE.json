{
  "ruleset_id": "BON_DE_COMMANDE_V1",
  "extractors": {
    "numero_commande": {
      "rule_id": "PO_NUMERO",
      "pattern": "(?:bon\\s+de\\s+commande|purchase\\s+order|commande|order)\\s*(?:n[?o]|num(?:ero)?|no|#)?\\s*[:\\-]?\\s*([A-Z0-9\\-\\/]+)",
      "value_type": "text"
    },
    "date_commande": {
      "rule_id": "PO_DATE_COMMANDE",
      "pattern": "date\\s+(?:de\\s+)?commande\\s*[:\\-]?\\s*(\\d{1,2}[\\/\\-]\\d{1,2}[\\/\\-]\\d{2,4})",
      "value_type": "date"
    },
    "total_ht": {
      "rule_id": "PO_TOTAL_HT",
      "pattern": "total\\s+ht\\s*[:\\]\\[]?\\s*([0-9][0-9\\s,\\.]{2,})",
      "value_type": "amount"
    },
    "total_ttc": {
      "rule_id": "PO_TOTAL_TTC",
      "pattern": "total\\s+ttc\\s*[:\\]\\[]?\\s*([0-9][0-9\\s,\\.]{2,})",
      "value_type": "amount"
    },
    "line_item": {
      "rule_id": "PO_LINE_ITEMS",
      "pattern": "^(?P<ref>[a-zA-Z]\\d{3,4})\\s+(?P<desc>.+?)\\s+(?P<qty>\\d{1,6})\\s+(?P<unit>\\d+(?:[.,]\\d+)?)\\s+(?P<val>\\d{1,3}(?:,\\d{3})*(?:\\.\\d{2})|\\d+(?:\\.\\d{2}))\\s*$",
      "value_type": "line_items",
      "flags": [
        "MULTILINE"
      ],
      "use_lines": true,
      "many": true
    }
  }
}